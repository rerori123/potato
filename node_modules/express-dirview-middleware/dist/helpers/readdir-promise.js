'use strict';

/**
 * Created by moyu on 2017/4/1.
 */
var fs = require('fs');
var nps = require('path');

module.exports = function (filename) {
    var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {
        return true;
    };

    return new Promise(function (resolve, reject) {
        var dirname = nps.dirname(filename);
        fs.readdir(filename, function (err, list) {
            if (err) {
                reject(err);
            } else {
                list = list.filter(function (name) {
                    return filter && filter(nps.join(dirname, name));
                });
                resolve(list);
            }
        });
    });
};